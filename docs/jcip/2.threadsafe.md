# 线程安全
- 类线程安全的定义：被多个线程访问时，类的行为依然正确。
- 线程安全的类已经封装了同步，客户端不需要自己提供。
- 无状态的对象永远线程安全。
- 为保证state一致性，需要在原子操作中更新相关联的state变量。
- java 强制原子性的内部锁机制：synchronized 块。
- 每个共享的state变量都需要唯一一个确定的锁来保护，维护者必须知道这个锁。
- 对于每一个涉及变量的不变约束，需要同一个锁保护其所有的变量。参阅 SynchronizedFactorizer